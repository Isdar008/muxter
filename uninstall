#!/bin/bash
clear
echo "=========================================="
echo " ğŸ—‘ï¸ Telegram GitHub Bot Uninstaller (Termux)"
echo "=========================================="

# Stop & delete bot dari PM2
echo "â¹ï¸ Menghentikan bot dan menghapus dari PM2..."
pm2 delete githubbot >/dev/null 2>&1
pm2 save >/dev/null 2>&1

# Hapus folder botenv
BOTDIR=$HOME/botenv
if [ -d "$BOTDIR" ]; then
    echo "ğŸ—‚ï¸ Menghapus folder $BOTDIR..."
    rm -rf "$BOTDIR"
else
    echo "âš ï¸ Folder $BOTDIR tidak ditemukan, lanjut..."
fi

# Hapus auto-resurrect di .bashrc
echo "ğŸ“ Menghapus auto-start PM2 dari ~/.bashrc..."
sed -i '/pm2 resurrect/d' ~/.bashrc

# Opsional: hapus PM2 global
read -p "ğŸ§¹ Mau uninstall PM2 global juga? (y/n): " UNPM2
if [[ "$UNPM2" == "y" || "$UNPM2" == "Y" ]]; then
    echo "ğŸ“¦ Menghapus PM2 global..."
    npm uninstall -g pm2
fi

echo ""
echo "âœ… Bot berhasil dihapus dari Termux!"
echo "ğŸ’¡ Kalau mau install ulang, jalankan script installer baru."
